(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2533],{62295:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var r=a(4942),n=a(47302),s=a(147),l=a(88615),i=a(9723),c=a(27484),o=a.n(c),d=a(25675),u=a(41664),p=a(67294),m=a(97e3),x=a(11163),f=a(77256),h=a(85893),g=function(e){var t=e.packageData,a=e.browserCurrency,r=t.products,n=(0,x.useRouter)(),s=(0,p.useState)(!1),c=s[0],g=s[1];return(0,h.jsxs)("div",{className:"accordion-single type-2 border border-grey px-4 mb-4",children:[(0,h.jsxs)("div",{className:"".concat(c?"before:bg-minus":"before:bg-plus-dark"," accordion before:w-4 before:h-4 before:rotate-180 before:bg-no-repeat before:bg-center before:bg-100% before:absolute before:top-2/4 before:right-0 before:-mt-[3px] before:transition-all  py-4 font-helveticaNeue500 pr-8 w-full text-left relative flex cursor-pointer"),onClick:function(){g(!c)},children:[(0,h.jsxs)("div",{className:"w-2/4",children:[(0,h.jsxs)("h3",{className:"font-helveticaNeue500 text-sm uppercase text-dark mb-2",children:["Package ",t.package_index]}),(0,h.jsx)("p",{className:"text-grey2 text-sm",children:o()(t.created_at).format("DD/MM/YYYY")})]}),(0,h.jsxs)("div",{className:"w-2/4 pl-2",children:[(0,h.jsx)("h3",{className:"font-helveticaNeue500 text-sm uppercase text-dark mb-2",children:"Status"}),(0,h.jsx)("p",{className:"text-grey2 text-sm capitalize",children:(0,l.dI)(t)})]})]}),(0,h.jsxs)("div",{className:"panel overflow-hidden transition-all duration-200 ease-out ".concat(c?"max-h-[2800px]":"max-h-0"),children:[(0,h.jsxs)("div",{className:"flex-1 w-full border-t border-grey pt-8 pb-8",children:[(0,h.jsxs)("p",{className:"mb-2",children:["Sold on ",o()(t.created_at).format("DD/MM/YYYY")]}),t.status===i.Tb.PENDING&&(0,h.jsxs)("div",{className:"md:flex justify-between",children:[(0,h.jsx)("p",{className:"text-green",children:t.tracking_number?"Your package's tracking number":"Please ship the item(s) and add the tracking number"}),"free"===t.shipping_type?(0,h.jsx)(u.default,{href:"/shipping/tracking?order_package_id=".concat(t.id),children:(0,h.jsx)("a",{className:"font-helveticaNeue500 uppercase text-sm underline",children:t.tracking_number||"Add tracking number"})}):(0,h.jsx)(u.default,{href:t.generate_shipping_label_url||"/my-account/sold-items",children:(0,h.jsx)("a",{className:"font-helveticaNeue500 uppercase text-sm underline",target:"_blank",rel:"noreferrer",children:t.tracking_number||"Generate shipping"})})]}),t.status===i.Tb.SHIPPED&&(0,h.jsxs)("div",{className:"md:flex justify-between",children:[(0,h.jsx)("p",{className:"text-green",children:"Please ship your item using the pre-paid packing label"}),(0,h.jsx)("a",{className:"font-helveticaNeue500 uppercase text-sm underline",children:"Print packing label"})]}),t.status===i.Tb.DELIVERED&&r.filter((function(e){return e.process_status.data.name===i.xh.SOLD_CONFIRMED})).length===r.length&&(0,h.jsx)("div",{className:"md:flex justify-between",children:(0,h.jsx)("p",{className:"text-green",children:"Your sale is finalised! Please choose your preferred payment option"})}),t.status===i.Tb.DELIVERED&&r.filter((function(e){return e.process_status.data.name===i.xh.PAYMENT_SENT})).length===r.length&&(0,h.jsx)("div",{className:"md:flex justify-between",children:(0,h.jsx)("p",{className:"text-grey2",children:"Payment received"})})]}),r.length>0&&r.map((function(e){var r,s,c;return(0,h.jsxs)("div",{className:"product-popup flex w-full text-left py-4 px-2 border-t border-grey",children:[(0,h.jsx)("div",{className:"thumb w-100",children:(0,h.jsx)(u.default,{href:"/product/".concat(e.id),children:(0,h.jsx)("a",{children:(0,h.jsx)(d.default,{className:"w-full",loader:m.k,src:e.media.data[0].original_image,alt:"",width:100,height:120})})})}),(0,h.jsxs)("div",{className:"info flex-1 text-sm pl-4 flex justify-between",children:[(0,h.jsx)("div",{className:"flex flex-wrap justify-between px-2",children:(0,h.jsxs)("div",{className:"w-full md:w-auto",children:[(0,h.jsx)("h3",{className:"font-helveticaNeue500 uppercase mb-1",children:e.name}),(0,h.jsx)("p",{className:"mb-2",children:(0,h.jsx)(f.Z,{price:e.base_currency_price})}),(null===(r=e.size)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.name)&&(0,h.jsxs)("p",{className:"mb-2",children:["SIZE: ",e.size.data.name]}),"SELLER"===(null===(c=e.payment)||void 0===c?void 0:c.data.type)&&(e.payment.data.max_amount>0?(0,h.jsxs)("p",{children:[(0,h.jsx)("br",{}),(0,h.jsx)(f.Z,{price:(0,l.Mi)(e.calculated_payout_amount,e.currency.data.code,a)})," ","in bank transfer"]}):(0,h.jsxs)("p",{children:[(0,h.jsx)("br",{}),(0,h.jsx)(f.Z,{price:(0,l.Mi)(e.calculated_payout_amount+.2*e.calculated_payout_amount,e.currency.data.code,a)})," ","in Ganni gift card"]}))]})}),t.status===i.Tb.DELIVERED&&e.process_status.data.name===i.xh.SOLD_CONFIRMED&&(0,h.jsx)("a",{onClick:function(){return function(e,t){var a=e.order_products.data.find((function(e){return e.product_id===t.id}));a&&a.receive_payment_url&&n.push(a.receive_payment_url)}(t,e)},className:"font-helveticaNeue500 uppercase text-sm underline cursor-pointer",children:"Receive payment"})]})]},e.id)}))]})]})},b=a(5887),v=a(88767),j=a(46837),y=a(9008),N=a(75472),_=a.n(N),w=a(71537),k=a(87517);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=function(){var e=(0,x.useRouter)(),t=(0,b.J)().isLoggedIn,a=(0,p.useState)([]),r=a[0],l=a[1],i=(0,p.useState)(),c=i[0],o=i[1],d=(0,k.u)().browserCurrency,u=(0,v.useMutation)((function(e){var t=e.page;return(0,j.h)("products/get-package-by-seller?page=".concat(t||1,"&per_page=10"),{method:"post"},"raw")})).mutate;return(0,p.useEffect)((function(){u({page:e.query.page},{onSuccess:function(e){var t=e.data,a=e.meta.pagination;t.length>0&&(t=t.map((function(e){return O(O({},e),{},{products:e.order_products.data.map((function(e){return e.product.data}))})})),t=(t=_()(t,["id"],["asc"])).map((function(e,t){return O(O({},e),{},{package_index:((null===a||void 0===a?void 0:a.total)-(null===a||void 0===a?void 0:a.per_page)*(null===a||void 0===a?void 0:a.current_page)>=0?(null===a||void 0===a?void 0:a.total)-(null===a||void 0===a?void 0:a.per_page)*(null===a||void 0===a?void 0:a.current_page):(null===a||void 0===a?void 0:a.total)-(null===a||void 0===a?void 0:a.per_page)*(null===a||void 0===a?void 0:a.current_page)-((null===a||void 0===a?void 0:a.total)-(null===a||void 0===a?void 0:a.per_page)*(null===a||void 0===a?void 0:a.current_page)))+t+1})})),t=_()(t,["package_index"],["desc"])),o(a),l(t)}})}),[e.query]),t?(0,h.jsxs)("div",{children:[(0,h.jsxs)(y.default,{children:[(0,h.jsx)("title",{children:"GanniRepeat - My Account - Sold Items"}),(0,h.jsx)("meta",{name:"description",content:"GanniRepeat - My Account - Sold Items"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,h.jsx)("main",{className:"text-dark font-helveticaNeue400 text-sm overflow-x-hidden font-normal",children:(0,h.jsxs)("div",{className:"flex flex-wrap lg:bg-lightGrey",children:[(0,h.jsx)("div",{className:"lg:py-12 px-6 lg:px-12 w-full lg:w-480",children:(0,h.jsx)(n.Z,{tab:6})}),(0,h.jsxs)("div",{className:"bg-white py-6 lg:py-12 px-6 lg:px-20 w-full lg:w-auto lg:flex-1",children:[(0,h.jsx)("h3",{className:"font-helveticaNeue500 uppercase text-2xl mb-2",children:"My Account"}),(0,h.jsx)("h2",{className:"font-helveticaNeue500 uppercase text-green text-4xl lg:text-5xl mb-2",children:"sold items"}),(0,h.jsx)("div",{className:"mt-12",children:(0,h.jsx)("hr",{className:"border-t-grey my-8"})}),r&&r.length>0?(0,h.jsxs)("div",{children:[r.map((function(e){return(0,h.jsx)(g,{packageData:e,browserCurrency:d},e.id)})),c&&(0,h.jsx)("div",{className:"pagination w-full flex justify-end mt-40",children:(0,h.jsx)(s.Z,{pageNumber:c.total_pages})})]}):(0,h.jsx)(w.Z,{title:"You haven't sold anything yet.",sub_title:"Put your wardrobe on repeat by clicking below.",isSell:!0})]})]})})]}):null}},19677:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-account/sold-items",function(){return a(62295)}])}},function(e){e.O(0,[837,9774,2888,179],(function(){return t=19677,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
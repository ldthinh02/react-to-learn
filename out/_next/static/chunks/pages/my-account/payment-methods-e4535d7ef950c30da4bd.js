(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8735],{47302:function(e,t,n){"use strict";var a=n(73534),r=n(56581),s=n(97e3),i=n(25675),c=n(67294),l=n(82069),o=n(9113),u=n(9723),d=n(11163),f=n(80868),m=n(85893);function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.Z=function(e){var t,n=e.tab,h=e.profile_picture,p=(0,c.useState)(!1),v=p[0],g=p[1],b=(0,o.f)().data,N=(0,c.useState)(null),j=N[0],y=N[1],k=(0,c.useState)(0),w=k[0],_=k[1],S=(0,c.useState)([]),M=S[0],C=S[1],E=(0,f.r)().data,A=(0,a.e)().data,P=(0,r.T)(null===A||void 0===A?void 0:A.customer.data.id.toString()).data;(0,c.useEffect)((function(){E&&C(E.data)}),[E]),(0,c.useMemo)((function(){A&&y(A.customer.data)}),[A]);(0,c.useEffect)((function(){b&&_(b.unread-function(e){var t,n=0,a=x(M);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.includes(r.inbox_conversation.data.id)&&u.E2.includes(r.inbox_message.data.type)&&(n+=1)}}catch(s){a.e(s)}finally{a.f()}return n}(b.reduce_conversation_unread_ids))}),[b]);var O=[{line:9,total:w}],F=function(e){var t=O.find((function(t){return t.line===e}));return t&&t.total>0?t:void 0};return(0,m.jsxs)("div",{className:"w-full m-auto flex flex-col",children:[(0,m.jsxs)("div",{className:"user-profile-block flex order-2 lg:order-1",children:[(0,m.jsx)("div",{className:"thumb mb-8 w-24",children:(0,m.jsx)(i.default,{className:"w-full",loader:s.k,src:h||(null===j||void 0===j?void 0:j.profile_picture)||"/assets/images/Default_Profile.svg",alt:"",width:96,height:96,objectFit:"cover"})}),(0,m.jsxs)("div",{className:"info mb-8 lg:mb-12 flex-1 pl-4",children:[(0,m.jsx)("div",{className:"font-helveticaNeue500 ratings flex items-center text-pink text-sm",children:P&&P.rate?(0,m.jsx)(l.Z,{rate:P.rate}):""}),(0,m.jsx)("h3",{className:"font-helveticaNeue500 text-dark uppercase text-2xl mb-1",children:(null===j||void 0===j?void 0:j.first_name)||"FirstName"}),(0,m.jsxs)("p",{className:"font-helveticaNeue500 text-dark uppercase text-xl mb-1",children:["@",(null===j||void 0===j?void 0:j.nickname)||"Username"]})]})]}),(0,m.jsxs)("div",{className:"aside-nav-wrap order-1 -mx-6 lg:mx-0 mb-8 lg:mb-0 lg:order-2",children:[(0,m.jsx)("div",{className:"account-nav-toggle-mobile bg-pink text-white lg:hidden",children:(0,m.jsxs)("div",{className:"relative bg-pink text-[14px] font-medium leading-none text-white lg:hidden uppercase pt-[25px] pb-[14px] px-[18px] cursor-pointer",onClick:function(){g(!v)},children:[null===(t=u.NP.find((function(e,t){return t+1===n&&e})))||void 0===t?void 0:t.label,(0,m.jsx)("div",{className:"".concat(v?"-rotate-45":""," absolute top-6 right-[10px] inline-block cursor-pointer transition-all float-right"),children:(0,m.jsx)(i.default,{src:"/assets/icons/plus-2.svg",alt:"",width:14,height:14})})]})}),(0,m.jsx)("div",{id:"account-nav",className:"inner bg-lightGrey lg:block px-6 lg:px-0 ".concat(v?"":"hidden"),children:u.NP.map((function(e,t){var a;return(0,m.jsxs)("div",{className:"pr-4 flex block cursor-pointer border-b text-dark border-b-dark bg-account-nav bg-no-repeat bg-right-center ".concat(n===t+1&&"text-pink border-b-pink bg-none"),onClick:function(){return d.default.push("/my-account".concat(e.path))},children:[(0,m.jsx)("div",{className:"font-helveticaNeue500 pt-7 pb-6 leading-none tracking-0 uppercase text-[18px]",children:e.label}),F(t)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"text-pink pl-1 pt-9 pb-6 font-helveticaNeue500 text-[16px] leading-[0px] tracking-0",children:"("}),(0,m.jsx)("div",{className:"text-pink pt-[33px] pb-6 font-helveticaNeue500 text-[16px] leading-[0px] tracking-0",children:null===(a=F(t))||void 0===a?void 0:a.total}),(0,m.jsx)("div",{className:"text-pink pt-9 pb-6 font-helveticaNeue500 text-[16px] leading-[0px] tracking-0",children:")"})]})]},e.label.toString())}))})]})]})}},6746:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});n(67294);var a=n(85893),r=function(e){var t=e.active,n=e.onChange,r=e.classes,s=e.label,i=e.value,c=e.name,l=e.disabled,o=void 0!==l&&l,u=e.labelClasses;return(0,a.jsxs)("label",{className:"custom-radio cursor-pointer block ".concat(u),children:[(0,a.jsx)("input",{type:"radio",className:"hidden",value:i,onChange:n,name:c,disabled:o}),(0,a.jsxs)("span",{className:"relative block pl-6",children:[(0,a.jsx)("span",{className:"absolute top-px left-0 ".concat(t?"bg-black":"bg-white"," border border-dark block w-[12px] h-[12px] rounded-full ").concat(r)}),t&&(0,a.jsx)("span",{className:"absolute top-[3px] left-[2px] w-[8px] h-[8px] rounded-full bg-white border-dark block"}),s]})]})}},82069:function(e,t,n){"use strict";var a=n(67294),r=n(25675),s=n(85893);t.Z=function(e){var t=e.rate,n=e.values,i=e.size||12,c=(0,a.useState)(0),l=c[0],o=c[1],u=(0,a.useState)(!1),d=u[0],f=u[1];return(0,a.useEffect)((function(){!function(){var e=parseInt(t.toString()),n=t-e;e>0&&o(e),n>0&&f(!0)}()}),[t]),(0,s.jsxs)("div",{className:"flex",children:[function(){for(var e=[],t=0;t<5;t++)e.push("rating-".concat(t+1));return e}().map((function(e,t){return(0,s.jsx)("div",{className:"mr-[4px]",children:t<l?(0,s.jsx)(r.default,{className:"cursor-pointer",src:"/assets/icons/rating-1.svg",alt:"icon rating",width:i,height:i}):d&&t===l?(0,s.jsx)(r.default,{className:"cursor-pointer",src:"/assets/icons/rating-2.svg",alt:"icon rating",width:i,height:i}):(0,s.jsx)(r.default,{className:"cursor-pointer",src:"/assets/icons/rating-3.svg",alt:"icon rating",width:i,height:i})},e.toString())})),(0,s.jsxs)("span",{className:"text-pink ".concat(i>12?"text-[14px] pt-[1px]":"text-[12px] -mt-[2px]"),children:["(",n,")"]})]})}},56581:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var a=n(46837),r=n(88767),s=function(e){return(0,r.useQuery)("seller_info",(function(){return(0,a.h)("users/".concat(e,"/info"))}),{enabled:!!e})}},58191:function(e,t,n){"use strict";n.d(t,{wf:function(){return i},zU:function(){return c},Hj:function(){return l},Li:function(){return o}});var a=n(46837),r=n(88767),s=n(5887),i=function(){var e=(0,s.J)().isLoggedIn;return(0,r.useQuery)("my_payment_methods",(function(){return(0,a.h)("me/cards")}),{refetchOnWindowFocus:!1,enabled:!!e,retry:0})},c=function(){return(0,r.useMutation)((function(e){return(0,a.h)("users/me/card/default/".concat(e.source),{method:"put"})}))},l=function(){return(0,r.useMutation)((function(e){return(0,a.h)("me/cards",{method:"post",body:JSON.stringify(e)})}))},o=function(){return(0,r.useMutation)((function(e){return(0,a.h)("/me/delete-card",{method:"POST",body:JSON.stringify(e)})}))}},62809:function(e,t,n){"use strict";n.r(t);var a=n(47302),r=n(6746),s=n(90025),i=n(58191),c=n(9008),l=n(41664),o=n(67294),u=n(25675),d=n(11163),f=n(85893);t.default=function(){var e=(0,d.useRouter)(),t=(0,o.useState)(null),n=t[0],m=t[1],x=(0,o.useState)(null),h=x[0],p=x[1],v=(0,i.wf)(),g=v.data,b=v.isSuccess,N=v.refetch,j=(0,s._)(),y=j.data,k=j.isSuccess,w=(0,i.zU)(),_=w.mutate,S=w.isLoading,M=(0,i.Li)().mutate;(0,o.useMemo)((function(){b&&(g&&g.card_source.data.length>0?(m(g.card_source.data),p(g.default)):(m(null),p(null)))}),[g]),(0,o.useEffect)((function(){n||e.push("/my-account/payment-methods/add")}),[n]);var C=function(e){h!==e.target.value&&_({source:e.target.value},{onSuccess:function(){return p(e.target.value)}})};return(0,f.jsxs)("div",{children:[(0,f.jsxs)(c.default,{children:[(0,f.jsx)("title",{children:"GanniRepeat - My Account - Payment Methods"}),(0,f.jsx)("meta",{name:"description",content:"GanniRepeat - My Account - Payment Methods"}),(0,f.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,f.jsx)("main",{className:"text-dark font-helveticaNeue400 text-sm overflow-x-hidden font-normal",children:(0,f.jsxs)("div",{className:"flex flex-wrap lg:bg-lightGrey",children:[(0,f.jsx)("div",{className:"lg:py-12 px-6 lg:px-12 w-full lg:w-480",children:(0,f.jsx)(a.Z,{tab:4})}),(0,f.jsxs)("div",{className:"bg-white py-6 lg:py-12 px-6 lg:px-20 w-full lg:w-auto lg:flex-1",children:[(0,f.jsx)("h3",{className:"font-helveticaNeue500 uppercase text-2xl mb-2",children:"My Account"}),(0,f.jsx)("h2",{className:"font-helveticaNeue500 uppercase text-green text-4xl lg:text-5xl mb-2",children:"Payment methods"}),(0,f.jsx)("div",{className:"mt-12",children:(0,f.jsx)("hr",{className:"border-t-grey my-8"})}),k&&(0,f.jsx)(f.Fragment,{children:y&&y.length>0?(0,f.jsxs)(f.Fragment,{children:[n&&n.length>0&&(0,f.jsx)("div",{className:"flex flex-wrap",children:n.map((function(e,t){return(0,f.jsxs)("div",{className:"w-full md:w-2/4 mb-8",children:[(0,f.jsx)("div",{className:"mb-6",children:(0,f.jsx)(r.N,{label:e.id===h?"Default payment account":"Make default payment method",disabled:e.id===h||S,value:e.id,name:"default_payment",active:e.id===h,onChange:C})}),(0,f.jsxs)("address",{className:"font-helveticaNeue400 text-sm not-italic mb-4",children:[e.name," ",(0,f.jsx)("br",{}),e.brand," ",(0,f.jsx)("br",{}),"**** ",e.last4]}),(0,f.jsx)("div",{className:"mb-8 md:mb-0",children:(0,f.jsx)("a",{onClick:function(){return t=e.id,void M({source:{id:t}},{onSuccess:function(){N()}});var t},className:"font-helveticaNeue500 uppercase text-sm underline cursor-pointer",children:"Delete"})})]},t)}))}),(0,f.jsx)("hr",{className:"border-t-grey my-8"}),(0,f.jsx)(l.default,{href:"/my-account/payment-methods/add",children:(0,f.jsx)("a",{className:"font-helveticaNeue500 uppercase text-sm underline",children:"Add new payment method"})})]}):(0,f.jsxs)("div",{className:"border border-pink p-4 flex items-center mb-6 lg:mb-8",children:[(0,f.jsx)("div",{className:"w-6",children:(0,f.jsx)(u.default,{src:"/assets/images/Info.svg",alt:"",width:"100%",height:"100%"})}),(0,f.jsx)("div",{className:"pl-4 text-sm flex-1",children:(0,f.jsxs)("p",{children:["Please note that you should add a valid address before your payment method. Click"," ",(0,f.jsx)(l.default,{href:"/my-account/address",children:(0,f.jsx)("a",{className:"cursor-pointer underline",children:"here"})})," ","to add an address"]})})]})})]})]})})]})}},25038:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-account/payment-methods",function(){return n(62809)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=25038,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7304],{55995:function(e,r,a){"use strict";var t=a(67294),n=a(56727),i=a(25675),l=a(85893),c=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter(Boolean).join(" ")};r.Z=function(e){var r=e.name,a=e.label,s=e.data,o=e.onChange,d=e.classes,u=void 0===d?"":d,m=e.value,h=e.error,p=e.touched,v=e.require,x=e.classesCustomSelect,g=e.typeChar,b=(0,t.useState)(),f=b[0],j=b[1];return(0,t.useEffect)((function(){if(m&&s){var e=s.find((function(e){var r;return e.name===m||(null===(r=e.value)||void 0===r?void 0:r.toString())===m}));j(e)}}),[s,m]),(0,l.jsx)("div",{children:(0,l.jsx)(n.Ri,{value:f,onChange:function(e){j(e),null===o||void 0===o||o(e)},children:function(e){var o=e.open;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.Ri.Label,{className:"block text-[14px] uppercase",children:[a," ",v?"*":""]}),(0,l.jsxs)("div",{className:"relative ".concat(u),children:[(0,l.jsxs)(n.Ri.Button,{className:"h-[44px] w-full bg-white text-[14px] focus-none text-left border pt-[8px] pb-[6px] px-3 ".concat(f?g||"capitalize":"text-mgrey"," ").concat(h&&p?"!border-[#DA0714]":"border-mgrey"," ").concat(x),children:[(0,l.jsx)("span",{className:"block truncate pl-[1px] leading-1.25 ".concat(h&&p?"text-red":""),children:h&&p?"Required":f?f.name:"Select"}),(0,l.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,l.jsx)("div",{className:"h-5 w-5 transition-transform duration-300",children:o?(0,l.jsx)(i.default,{src:"/assets/images/angle-down.svg",alt:"",width:10,height:10}):(0,l.jsx)(i.default,{src:"/assets/images/angle-up.svg",alt:"",width:10,height:10})})})]}),(0,l.jsx)(n.uT,{show:o,as:t.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)(n.Ri.Options,{className:"w-full max-h-60 font-helveticaNeue400 bg-white text-xs absolute border border-mgrey border-t-0 overflow-auto scrollbar-thin z-10 outline-0 focus:outline-0 z-50",children:s.map((function(e,a){return"Select"!==e.name&&(0,l.jsx)(n.Ri.Option,{className:function(e){var r=e.active;return c(r?"bg-gray-100":"","cursor-pointer select-none relative hover:bg-[#111111] hover:text-white")},value:{id:e.id?e.id:a,name:e.name,value:e.value,field:r},children:function(r){var a=r.selected;return(0,l.jsx)("span",{className:c(a?"font-medium bg-gray-100 py-2 px-3":"font-normal","py-2 px-3 block truncate",g||"capitalize"),children:e.name})}},a)}))})})]})]})}})})}},86335:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return x}});var t=a(9008),n=a(25675),i=a(11163),l=a(67294),c=a(46837),s=a(88767),o=a(94649),d=a(22283),u=a(55995),m=a(27335),h=a(97e3),p=a(22887),v=a(85893);function x(){var e,r,a=(0,i.useRouter)(),x=(0,l.useState)([]),g=x[0],b=x[1],f=(0,l.useState)(!1),j=f[0],_=f[1],k=(0,l.useState)(),N=k[0],w=k[1],y=(0,l.useMemo)((function(){return a.query.order_package_id}),[a]),S=(0,s.useQuery)("getCourier",(function(){return(0,c.h)("couriers/list",{method:"post"})})).data;(0,l.useEffect)((function(){S&&b(S.map((function(e){return{name:e.name,value:"".concat(e.id)}})))}),[S]);var C=function(e){return(0,s.useQuery)(["getOrderPackage",e],(function(){if(e)return(0,c.h)("orders/package_id/".concat(e,"?fallback_language=en"),{method:"get"})}))}(Number(y)).data;(0,l.useEffect)((function(){C&&C.courier_id&&C.tracking_number&&(F.setFieldValue("courier_id",C.courier_id),F.setFieldValue("tracking_number",C.tracking_number),_(!0))}),[C]);var E=(0,s.useMutation)((function(e){return(0,c.h)("orders/".concat(e.order_id,"/order_package/").concat(e.order_package_id,"/update-tracking-number"),{method:"POST",body:JSON.stringify(e)})}),{}),R=E.mutate,T=E.isLoading,F=(0,o.TA)({initialValues:{courier_id:"",tracking_number:""},validationSchema:d.XD,onSubmit:function(e){w(void 0);var r={courier_id:String(e.courier_id),tracking_number:e.tracking_number,order_id:Number(null===C||void 0===C?void 0:C.order.data.id),order_package_id:Number(null===C||void 0===C?void 0:C.id)};R(r,{onSuccess:function(){a.push("/shipping/tracking-confirmed")},onError:function(e){w(String(e))}})}});return(0,v.jsxs)("div",{children:[(0,v.jsxs)(t.default,{children:[(0,v.jsx)("title",{children:"GanniRepeat - Add Tracking Number"}),(0,v.jsx)("meta",{name:"description",content:"GanniRepeat - Add Tracking Number"}),(0,v.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,v.jsxs)("div",{className:"flex flex-wrap bg-grey",children:[(0,v.jsx)("div",{className:"py-6 lg:py-12 px-6 lg:px-20 w-full lg:w-480",children:(0,v.jsxs)("div",{className:"w-full md:w-300 m-auto",children:[(0,v.jsx)("h2",{className:"font-helveticaNeue500 text-xl uppercase mb-6",children:"Your products"}),(0,v.jsx)("div",{className:"bg-white",children:(null===C||void 0===C||null===(e=C.order_products)||void 0===e?void 0:e.data)&&(null===C||void 0===C||null===(r=C.order_products)||void 0===r?void 0:r.data.length)>0&&(null===C||void 0===C?void 0:C.order_products.data.map((function(e,r){var a,t,i,l,c,s,o,d,u,m;return(0,v.jsxs)("div",{className:"product-popup flex w-full text-left py-4 px-4",children:[(0,v.jsx)("div",{className:"thumb w-100",children:(0,v.jsx)("a",{href:"/product/".concat(e.product.data.id),children:(0,v.jsx)(n.default,{className:"w-full",src:null===(a=e.product.data.media)||void 0===a?void 0:a.data[0].original_image,alt:"",width:"100%",height:"100%",objectFit:"cover",loader:h.k})})}),(0,v.jsxs)("div",{className:"info flex-1 text-sm pl-4",children:[(0,v.jsx)("h3",{className:"font-helveticaNeue500 uppercase mb-1",children:null===(t=e.product)||void 0===t?void 0:t.data.name}),(0,v.jsxs)("p",{children:[null===(i=e.product)||void 0===i||null===(l=i.data.currency)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.symbol,null===(s=e.product)||void 0===s?void 0:s.data.price]}),(0,v.jsx)("br",{}),(null===(o=e.product.data.size)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.name)&&(0,v.jsxs)("p",{children:["SIZE: ",null===(u=e.product.data.size)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.name]})]})]},r)})))})]})}),(0,v.jsxs)("div",{className:"bg-white py-6 lg:py-12 px-6 lg:px-20 w-full lg:w-auto lg:flex-1",children:[(0,v.jsx)("h2",{className:"font-helveticaNeue500 text-2xl uppercase mb-6 md:mb-12",children:"Add tracking number"}),(0,v.jsx)("div",{className:"text-sm",children:(0,v.jsx)("p",{children:"Please add the tracking number for your package"})}),(0,v.jsx)("hr",{className:"border-t-grey my-8"}),(0,v.jsxs)("form",{onSubmit:F.handleSubmit,children:[(0,v.jsxs)("div",{className:"mb-12",children:[(0,v.jsx)("label",{className:"label font-helveticaNeue500 text-sm uppercase block mb-2"}),g.length>0&&(0,v.jsx)(u.Z,{label:"courier",name:"courier_id",value:"".concat(F.values.courier_id),classes:"mt-[12px]",onChange:function(e){j||F.setFieldValue("".concat(e.field),e.value)},data:g,error:F.errors.courier_id,touched:F.touched.courier_id,errorMessage:F.errors.courier_id&&F.touched.courier_id?F.errors.courier_id:""})]}),(0,v.jsxs)("div",{className:"mb-12",children:[(0,v.jsx)("label",{className:"label font-helveticaNeue500 text-sm uppercase block mb-2",children:"tracking number"}),(0,v.jsx)(m.Z,{id:"tracking_number",name:"tracking_number",type:"text",disabled:j,onChange:F.handleChange,value:F.values.tracking_number,placeholder:"tracking number",errorMessage:F.errors.tracking_number&&F.touched.tracking_number?F.errors.tracking_number:"",classes:"h-11"})]}),N&&(0,v.jsx)(p.Z,{message:N}),(0,v.jsx)("div",{className:"mb-6",children:j?(0,v.jsx)("button",{disabled:!0,type:"submit",className:"font-helveticaNeue500 text-center px-3 transition-all border border-dark text-white bg-dark py-4 text-xs block w-full uppercase tracking-widest cursor-not-allowed opacity-70",children:"Submitted"}):(0,v.jsx)("button",{disabled:T,type:"submit",className:"font-helveticaNeue500 text-center px-3 transition-all border border-dark  text-white bg-dark hover:border-dark hover:text-dark hover:bg-white py-4 text-xs block w-full uppercase tracking-widest",children:T?"loading...":"Submit"})})]})]})]})]})}},62406:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shipping/tracking",function(){return a(86335)}])}},function(e){e.O(0,[9774,2888,179],(function(){return r=62406,e(e.s=r);var r}));var r=e.O();_N_E=r}]);